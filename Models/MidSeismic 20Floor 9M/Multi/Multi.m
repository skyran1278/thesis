classdef Multi

    properties
        structural_behavior_type = 'A';

        % SDS_SD1 = [0.5, 0.3];
        % SMS_SM1 = [0.7, 0.4];
        SDS_SD1 = [0.66, 0.49];
        SMS_SM1 = [0.8, 0.54];
        % SDS_SD1 = [0.8, 0.675];
        % SMS_SM1 = [1, 0.77];

        PF = [
            1.377, 0.548, 0.295
        ];

        effective_mass = [
            4351, 817, 202
        ];

        % roof displacement(mm), V(tonf)
        mmc = [
            -0.002	0
            99.998	296.45
            120.762	358.0028
            133.175	389.4728
            145.071	406.7626
            171.633	420.8151
            303.396	455.4058
            418.531	475.7807
            525.604	490.9952
            540.143	492.4195
            632.33	498.3036
            632.34	481.6847
            634.541	483.8207
            638.684	485.8849
            645.434	487.031
            645.444	469.6658
            646.998	471.3991
            651.651	474.2977
            654.518	475.4136
            663.549	477.024
            663.559	434.0037
            663.226	391.971
            676.656	403.6472
        ];

        mode1 = [
            -0.002	0
            99.998	169.7896
            199.998	339.5792
            202.472	343.7797
            231.386	388.8026
            250.527	402.8936
            261.796	406.9544
            266.724	406.6265
            298.341	406.7285
            329.186	406.1606
            385.54	406.5971
            426.343	406.7058
            477.029	406.7783
            573.061	406.7531
            610.109	406.6809
            710.109	406.2727
            857.534	406.5148
            957.534	406.8513
            983.822	407.6368
            984.678	407.6576
            984.679	359.2899
            993.339	362.2295
        ];

        mode2 = [
            -0.002	0
            -36.344	230.7059
            -48.855	293.9896
            -56.288	313.2853
            -64.008	325.1624
            -64.014	323.7531
            -80.676	343.087
            -119.581	363.7921
            -191.121	382.218
            -264.193	392.5534
            -332.943	398.1623
            -333.039	398.179
            -333.082	398.1831
        ];

        mode3 = [
            -0.002	0
            14.584	135.4531
            18.982	166.3858
            29.117	197.6125
            46.981	228.9914
            62.491	241.1875
            93.4	253.8272
            193.512	278.9057
            257.072	290.2057
            257.082	270.7631
            258.428	275.8457
            259.148	277.3687
            263.977	279.4885
            263.987	264.0583
            264.579	265.9133
            265.623	268.0544
            266.753	269.338
            266.958	236.5539
            269.454	244.9056
            271.118	248.3732
            276.946	254.8071
        ];

        inverted_triangle = [
            -0.002	0
            99.998	173.0725
            199.998	346.1449
            207.419	358.8463
            232.04	396.5236
            251.708	410.6794
            258.987	413.4292
            266.821	414.7976
            273.509	415.2001
            296.45	415.9327
            330.198	416.5311
            433.186	416.3945
            485.013	416.4935
            547.911	416.4651
            644.281	416.3884
            671.765	416.3313
            771.765	416.9141
            926.731	416.0415
            984.38	415.6275
            976.138	395.482
        ];
    end

    methods
        function [sd, sa] = load_pattern(obj, name)
            [~, index] = max(obj.(name)(:, 2));
            [pf, mass] = obj.parameter(name);
            sd = abs(obj.(name)(1:index, 1).' ./ pf);
            sa = abs(obj.(name)(1:index, 2).' ./ mass);
        end

        function [ss, s1] = spectrum(obj, name)
            if name == "DBE"
                ss = obj.SDS_SD1(1);
                s1 = obj.SDS_SD1(2);
            elseif name == "MCE"
                ss = obj.SMS_SM1(1);
                s1 = obj.SMS_SM1(2);
            end
        end

        function [PF, effective_mass] = parameter(obj, name)
            if name == "mmc" || name == "inverted_triangle"
                index = 1;
            else
                index = str2double(name(end));
            end

            PF = obj.PF(index);
            effective_mass = obj.effective_mass(index);

        end
    end

end
